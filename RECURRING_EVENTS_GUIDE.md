# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–º—Å—è —Å–æ–±—ã—Ç–∏—è–º

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–æ–±—ã—Ç–∏–π –≤ ObschiySbor.

## –û–±–∑–æ—Ä

–§—É–Ω–∫—Ü–∏—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–æ–±—ã—Ç–∏–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞–º —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–µ—Ä–∏–∏ —Å–æ–±—ã—Ç–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ù–∞–ø—Ä–∏–º–µ—Ä:
- –ô–æ–≥–∞ –∫–∞–∂–¥—É—é —Å—Ä–µ–¥—É –≤ 18:00
- –ù–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã –ø–æ –≤—Ç–æ—Ä–Ω–∏–∫–∞–º –∏ —á–µ—Ç–≤–µ—Ä–≥–∞–º
- –í–µ–ª–æ–ø—Ä–æ–≥—É–ª–∫–∞ –∫–∞–∂–¥—ã–µ –≤—ã—Ö–æ–¥–Ω—ã–µ

## –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è —Å–æ–±—ã—Ç–∏—è

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ"
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ–±—ã—Ç–∏–∏ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, –¥–∞—Ç–∞, –º–µ—Å—Ç–æ)
3. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –¥–æ —Ä–∞–∑–¥–µ–ª–∞ **"–ü–æ–≤—Ç–æ—Ä—è—é—â–µ–µ—Å—è —Å–æ–±—ã—Ç–∏–µ"**
4. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "üîÑ –ü–æ–≤—Ç–æ—Ä—è—é—â–µ–µ—Å—è —Å–æ–±—ã—Ç–∏–µ"
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è:

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è

**–ß–∞—Å—Ç–æ—Ç–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è:**
- **–ï–∂–µ–¥–Ω–µ–≤–Ω–æ** - —Å–æ–±—ã—Ç–∏–µ –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
- **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ** - —Å–æ–±—ã—Ç–∏–µ –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é
- **–ï–∂–µ–º–µ—Å—è—á–Ω–æ** - —Å–æ–±—ã—Ç–∏–µ –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü

**–ò–Ω—Ç–µ—Ä–≤–∞–ª:**
- –î–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö: –∫–∞–∂–¥—ã–π 1, 2, 3... –¥–µ–Ω—å
- –î–ª—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã—Ö: –∫–∞–∂–¥—É—é 1, 2, 3... –Ω–µ–¥–µ–ª—é
- –î–ª—è –µ–∂–µ–º–µ—Å—è—á–Ω—ã—Ö: –∫–∞–∂–¥—ã–π 1, 2, 3... –º–µ—Å—è—Ü

**–î–Ω–∏ –Ω–µ–¥–µ–ª–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã—Ö):**
- –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏ (–ü–Ω, –í—Ç, –°—Ä, –ß—Ç, –ü—Ç, –°–±, –í—Å)
- –ï—Å–ª–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ - —Å–æ–±—ã—Ç–∏–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –≤ —Ç–æ—Ç –∂–µ –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏

**–û–∫–æ–Ω—á–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è:**
- **–ü–æ—Å–ª–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π** - –Ω–∞–ø—Ä–∏–º–µ—Ä, 10 —Ä–∞–∑
- **–î–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –¥–∞—Ç—ã** - –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ –∫–æ–Ω—Ü–∞ –ª–µ—Ç–∞

#### –ü—Ä–∏–º–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫

**–ü—Ä–∏–º–µ—Ä 1: –ô–æ–≥–∞ –∫–∞–∂–¥—É—é —Å—Ä–µ–¥—É**
```
–ß–∞—Å—Ç–æ—Ç–∞: –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
–ò–Ω—Ç–µ—Ä–≤–∞–ª: 1 (–∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é)
–î–Ω–∏ –Ω–µ–¥–µ–ª–∏: –°—Ä
–û–∫–æ–Ω—á–∞–Ω–∏–µ: –ü–æ—Å–ª–µ 12 –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
```

**–ü—Ä–∏–º–µ—Ä 2: –ù–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã 2 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é**
```
–ß–∞—Å—Ç–æ—Ç–∞: –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
–ò–Ω—Ç–µ—Ä–≤–∞–ª: 1
–î–Ω–∏ –Ω–µ–¥–µ–ª–∏: –í—Ç, –ß—Ç
–û–∫–æ–Ω—á–∞–Ω–∏–µ: –î–æ 31.12.2025
```

**–ü—Ä–∏–º–µ—Ä 3: –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–±–µ–∂–∫–∞**
```
–ß–∞—Å—Ç–æ—Ç–∞: –ï–∂–µ–¥–Ω–µ–≤–Ω–æ
–ò–Ω—Ç–µ—Ä–≤–∞–ª: 1 (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å)
–î–Ω–∏ –Ω–µ–¥–µ–ª–∏: -
–û–∫–æ–Ω—á–∞–Ω–∏–µ: –ü–æ—Å–ª–µ 30 –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–µ—Ä–∏–∏ —Å–æ–±—ã—Ç–∏–π

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è —Å–æ–±—ã—Ç–∏—è:
- –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ –æ—Ç–º–µ—á–µ–Ω–æ –∫–∞–∫ —à–∞–±–ª–æ–Ω
- –í—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –í—ã —É–≤–∏–¥–∏—Ç–µ –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –≤ —Å–µ—Ä–∏–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Events

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–º–∏—Å—è —Å–æ–±—ã—Ç–∏—è–º–∏

**–í –ø—Ä–æ—Ñ–∏–ª–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞:**
- –í—Å–µ —Å–æ–±—ã—Ç–∏—è —Å–µ—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- –ö–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ

**–£–¥–∞–ª–µ–Ω–∏–µ:**
- –£–¥–∞–ª–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–±—ã—Ç–∏—è —É–¥–∞–ª—è–µ—Ç –≤—Å—é —Å–µ—Ä–∏—é (CASCADE)
- –£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è —É–¥–∞–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –µ–≥–æ

## –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–ù–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `events`:**

```sql
parent_event_id UUID            -- ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
recurrence_config JSONB          -- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
recurrence_end_date TIMESTAMPTZ  -- –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å–µ—Ä–∏–∏
is_recurring_parent BOOLEAN      -- –û—Ç–º–µ—Ç–∫–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
```

**–§–æ—Ä–º–∞—Ç `recurrence_config`:**
```json
{
  "frequency": "weekly",
  "interval": 1,
  "daysOfWeek": [3, 5],
  "count": 10
}
```

### SQL –§—É–Ω–∫—Ü–∏–∏

#### `generate_recurring_events()`

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–æ–±—ã—Ç–∏–π.

```sql
SELECT * FROM generate_recurring_events(
  'parent-event-uuid',  -- ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
  'weekly',             -- –ß–∞—Å—Ç–æ—Ç–∞ (daily, weekly, monthly)
  1,                    -- –ò–Ω—Ç–µ—Ä–≤–∞–ª
  10,                   -- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
  ARRAY[1, 3, 5],      -- –î–Ω–∏ –Ω–µ–¥–µ–ª–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  '2025-12-31'         -- –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
);
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```sql
RETURNS TABLE (
  event_id UUID,
  event_date TIMESTAMP WITH TIME ZONE,
  created_at TIMESTAMP WITH TIME ZONE
)
```

#### `get_recurring_event_series()`

–ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –≤ —Å–µ—Ä–∏–∏.

```sql
SELECT * FROM get_recurring_event_series('any-event-uuid-in-series');
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```sql
RETURNS TABLE (
  id UUID,
  title TEXT,
  date TIMESTAMP WITH TIME ZONE,
  status TEXT,
  is_parent BOOLEAN
)
```

#### `delete_recurring_event_series()`

–£–¥–∞–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è —Å–µ—Ä–∏–∏ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ä–µ–∂–∏–º–∞–º–∏.

```sql
-- –£–¥–∞–ª–∏—Ç—å –≤—Å—é —Å–µ—Ä–∏—é
SELECT delete_recurring_event_series('event-uuid', 'all');

-- –£–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ –±—É–¥—É—â–∏–µ —Å–æ–±—ã—Ç–∏—è
SELECT delete_recurring_event_series('event-uuid', 'future');

-- –£–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–µ–µ —Å–æ–±—ã—Ç–∏–µ
SELECT delete_recurring_event_series('event-uuid', 'single');
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π (INTEGER)

### Frontend API

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç RecurringEventSettings:**

```jsx
import RecurringEventSettings from '../components/RecurringEventSettings';

<RecurringEventSettings
  value={recurrenceConfig}
  onChange={setRecurrenceConfig}
/>
```

**–£—Ç–∏–ª–∏—Ç—ã (recurringEvents.js):**

```javascript
import {
  createRecurringEvents,
  getRecurringEventSeries,
  deleteRecurringEvents,
  formatRecurrenceDescription,
  isRecurringEvent,
  isRecurringParent
} from '../utils/recurringEvents';

// –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–∏—é
await createRecurringEvents(parentEventId, {
  frequency: 'weekly',
  interval: 1,
  occurrenceCount: 10,
  daysOfWeek: [1, 3, 5],
  endDate: '2025-12-31'
});

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å—é —Å–µ—Ä–∏—é
const series = await getRecurringEventSeries(eventId);

// –£–¥–∞–ª–∏—Ç—å —Å–µ—Ä–∏—é
const deletedCount = await deleteRecurringEvents(eventId, 'all');

// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ
const description = formatRecurrenceDescription(recurrenceConfig);
// "–ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é –ø–æ: –ü–Ω, –°—Ä, –ü—Ç, –≤—Å–µ–≥–æ 10 —Ä–∞–∑"

// –ü—Ä–æ–≤–µ—Ä–∫–∏
if (isRecurringEvent(event)) { ... }
if (isRecurringParent(event)) { ... }
```

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–∏–∏:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç —Å–æ–±—ã—Ç–∏–µ –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ
   - –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `createRecurringEvents()`
   - SQL —Ñ—É–Ω–∫—Ü–∏—è `generate_recurring_events()` —Å–æ–∑–¥–∞—ë—Ç –¥–æ—á–µ—Ä–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
   - –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ –ø–æ–º–µ—á–∞–µ—Ç—Å—è `is_recurring_parent = true`

2. **–°–≤—è–∑—å —Å–æ–±—ã—Ç–∏–π:**
   - –î–æ—á–µ—Ä–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –∏–º–µ—é—Ç `parent_event_id` —É–∫–∞–∑—ã–≤–∞—é—â–∏–π –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ
   - –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ —Ö—Ä–∞–Ω–∏—Ç `recurrence_config` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
   - –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ —É–¥–∞–ª—è—é—Ç—Å—è (CASCADE)

3. **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–∞—Ç:**
   - –î–ª—è `daily`: –ø—Ä–∏–±–∞–≤–ª—è–µ–º `interval` –¥–Ω–µ–π
   - –î–ª—è `weekly`: –ø—Ä–∏–±–∞–≤–ª—è–µ–º `interval` –Ω–µ–¥–µ–ª—å, —É—á–∏—Ç—ã–≤–∞–µ–º `daysOfWeek`
   - –î–ª—è `monthly`: –ø—Ä–∏–±–∞–≤–ª—è–µ–º `interval` –º–µ—Å—è—Ü–µ–≤
   - –¶–∏–∫–ª –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ `occurrenceCount` –∏–ª–∏ `endDate`

### –ò–Ω–¥–µ–∫—Å—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```sql
CREATE INDEX idx_events_parent_event_id
  ON events(parent_event_id);

CREATE INDEX idx_events_is_recurring_parent
  ON events(is_recurring_parent)
  WHERE is_recurring_parent = TRUE;

CREATE INDEX idx_events_recurrence_end_date
  ON events(recurrence_end_date)
  WHERE recurrence_end_date IS NOT NULL;
```

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –∑–∞—â–∏—Ç–∞

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ú–∞–∫—Å–∏–º—É–º 100 —Å–æ–±—ã—Ç–∏–π –≤ —Å–µ—Ä–∏–∏ (–∑–∞—â–∏—Ç–∞ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞)
- `SECURITY DEFINER` –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π PostgreSQL
- RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –∫–∞–∂–¥–æ–º—É —Å–æ–±—ã—Ç–∏—é

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- –ß–∞—Å—Ç–æ—Ç–∞: —Ç–æ–ª—å–∫–æ `daily`, `weekly`, `monthly`
- –ò–Ω—Ç–µ—Ä–≤–∞–ª: –æ—Ç 1 –¥–æ 30
- –î–Ω–∏ –Ω–µ–¥–µ–ª–∏: 1-7 (ISO week day)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: –æ—Ç 1 –¥–æ 100

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –π–æ–≥–∏

```javascript
const eventData = {
  title: '–ô–æ–≥–∞ –≤ –ø–∞—Ä–∫–µ',
  description: '–£—Ç—Ä–µ–Ω–Ω—è—è –π–æ–≥–∞ –Ω–∞ —Å–≤–µ–∂–µ–º –≤–æ–∑–¥—É—Ö–µ',
  category: 'yoga',
  event_date: '2025-10-20T09:00:00',
  end_date: '2025-10-20T10:30:00',
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
};

const recurrenceConfig = {
  isRecurring: true,
  frequency: 'weekly',
  interval: 1,
  daysOfWeek: [3], // –°—Ä–µ–¥–∞
  occurrenceCount: 12,
  endType: 'count'
};

// –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è
if (recurrenceConfig.isRecurring) {
  await createRecurringEvents(event.id, recurrenceConfig);
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–µ—Ä–∏–∏

```javascript
// –í EventDetails –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
const [eventSeries, setEventSeries] = useState([]);

useEffect(() => {
  if (isRecurringEvent(event)) {
    getRecurringEventSeries(event.id)
      .then(series => setEventSeries(series));
  }
}, [event.id]);

// –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ —Å–æ–±—ã—Ç–∏—è —Å–µ—Ä–∏–∏
{eventSeries.length > 1 && (
  <div className="event-series">
    <h3>–°–µ—Ä–∏—è —Å–æ–±—ã—Ç–∏–π ({eventSeries.length})</h3>
    <ul>
      {eventSeries.map(e => (
        <li key={e.id}>
          {e.is_parent && 'üîÑ '}
          {new Date(e.date).toLocaleDateString('ru-RU')}
          - {e.status}
        </li>
      ))}
    </ul>
  </div>
)}
```

## Troubleshooting

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–æ–±—ã—Ç–∏—è –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞:
   ```sql
   SELECT count(*) FROM information_schema.columns
   WHERE table_name = 'events' AND column_name = 'parent_event_id';
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
   ```sql
   SELECT routine_name FROM information_schema.routines
   WHERE routine_name = 'generate_recurring_events';
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Supabase –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–æ—á–µ—Ä–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞—Ç–∞–º–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç `daysOfWeek` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∞—Å—Å–∏–≤ —á–∏—Å–µ–ª 1-7)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `frequency` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ (`daily`/`weekly`/`monthly`)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –≤ `event_date`

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

**–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- [ ] UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ–π —Å–µ—Ä–∏–∏ —Å–æ–±—ã—Ç–∏–π
- [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–π —Å–µ—Ä–∏–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- [ ] –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ —Å–µ—Ä–∏–∏ (–ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é –¥–∞—Ç—É)
- [ ] Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è —Å–µ—Ä–∏–∏ —Å–æ–±—ã—Ç–∏–π
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–µ—Ä–∏–∏ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–º –≤–∏–¥–µ

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–§—É–Ω–∫—Ü–∏—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–æ–±—ã—Ç–∏–π –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î –ø—Ä–∏–º–µ–Ω–µ–Ω–∞, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã, –ª–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞.

**–§–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**
- `database/migration_recurring_events.sql` - SQL –º–∏–≥—Ä–∞—Ü–∏—è
- `frontend/src/components/RecurringEventSettings.jsx` - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- `frontend/src/utils/recurringEvents.js` - —É—Ç–∏–ª–∏—Ç—ã
- `RECURRING_EVENTS_GUIDE.md` - —ç—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-10-19
