# –°–∏—Å—Ç–µ–º–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–î–∞—Ç–∞ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** 20 –æ–∫—Ç—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
**–í–µ—Ä—Å–∏—è:** 1.0

## üìã –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Å–ª–µ–¥—É—é—â–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º:
- –í—Ä–µ–º–µ–Ω–Ω–∞—è –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û–±–∂–∞–ª–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 1. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã `profiles`

–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:
- `is_blocked` ‚Äî —Ñ–ª–∞–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (TRUE/FALSE)
- `blocked_at` ‚Äî –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- `blocked_until` ‚Äî –¥–æ –∫–∞–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω (NULL = –Ω–∞–≤—Å–µ–≥–¥–∞)
- `blocked_by` ‚Äî –∫—Ç–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª (UUID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
- `block_reason` ‚Äî –ø—Ä–∏—á–∏–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–≤–∏–¥–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)

### 2. –¢–∞–±–ª–∏—Ü–∞ `user_blocks`

–ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Å –ø–æ–ª—è–º–∏:
- `id`, `user_id`, `blocked_by`
- `blocked_at`, `blocked_until`
- `reason`, `is_active`
- `unblocked_at`, `unblocked_by`, `unblock_reason`

### 3. –¢–∞–±–ª–∏—Ü–∞ `block_appeals`

–û–±–∂–∞–ª–æ–≤–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫:
- `id`, `user_id`, `block_id`
- `reason` (–¥–æ 1000 —Å–∏–º–≤–æ–ª–æ–≤)
- `status` (pending/approved/rejected)
- `reviewed_by`, `reviewed_at`, `admin_comment`

## üîß PostgreSQL —Ñ—É–Ω–∫—Ü–∏–∏

### `block_user(p_user_id, p_blocked_by, p_reason, p_blocked_until)`
–ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏.

### `unblock_user(p_user_id, p_unblocked_by, p_reason)`
–†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### `approve_block_appeal(p_appeal_id, p_reviewed_by, p_admin_comment)`
–û–¥–æ–±—Ä—è–µ—Ç –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### `reject_block_appeal(p_appeal_id, p_reviewed_by, p_admin_comment)`
–û—Ç–∫–ª–æ–Ω—è–µ—Ç –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏–µ.

### `auto_unblock_users()`
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏—é —Å—Ä–æ–∫–∞ (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ cron).

## üé® Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### `BlockedUserNotice.jsx`
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞—Ç—É, –ø—Ä–∏—á–∏–Ω—É, —Å—Ä–æ–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- –°–ø–∏—Å–æ–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- –ö–Ω–æ–ø–∫–∞ "–û–±–∂–∞–ª–æ–≤–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É"
- –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è

### `AppealBlockModal.jsx`
–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–¥–∞—á–∏ –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏—è:
- –§–æ—Ä–º–∞ —Å textarea (–¥–æ 1000 —Å–∏–º–≤–æ–ª–æ–≤)
- –°—á—ë—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –±–ª–æ–∫ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏

### `BlockUserModal.jsx`
–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤):
- –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í—ã–±–æ—Ä —Ç–∏–ø–∞: –≤—Ä–µ–º–µ–Ω–Ω–∞—è/–ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è
- –ü–æ–ª–µ datetime-local –¥–ª—è —Å—Ä–æ–∫–∞
- Textarea –¥–ª—è –ø—Ä–∏—á–∏–Ω—ã (–¥–æ 500 —Å–∏–º–≤–æ–ª–æ–≤)
- Warning box —Å –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º–∏

## üëÆ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å

### –í–∫–ª–∞–¥–∫–∞ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" (`Admin.jsx`)
- –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏/email
- –§–∏–ª—å—Ç—Ä: –≤—Å–µ/–∞–∫—Ç–∏–≤–Ω—ã–µ/–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
- –¢–∞–±–ª–∏—Ü–∞ —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏: –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å/–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫

### –í–∫–ª–∞–¥–∫–∞ "–û–±–∂–∞–ª–æ–≤–∞–Ω–∏—è" (`Admin.jsx`)
- –°–ø–∏—Å–æ–∫ pending –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏–π
- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
- –ö–Ω–æ–ø–∫–∏: –û–¥–æ–±—Ä–∏—Ç—å/–û—Ç–∫–ª–æ–Ω–∏—Ç—å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –¥–µ–π—Å—Ç–≤–∏–π

## üöÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### `CreateEvent.jsx`
–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
–ï—Å–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `BlockedUserNotice` –≤–º–µ—Å—Ç–æ —Ñ–æ—Ä–º—ã.

### `EventDetails.jsx`
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —Å–æ–±—ã—Ç–∏—é.
–ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è" –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –ù–ï –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º.

### `Rules.jsx`
–û–±–Ω–æ–≤–ª—ë–Ω —Ä–∞–∑–¥–µ–ª "6. –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∏ —Å–∞–Ω–∫—Ü–∏–∏":
- –¢–∏–ø—ã –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- –ì—Ä–∞–¥–∞—Ü–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π (4 —É—Ä–æ–≤–Ω—è)
- –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏—è

## üìù Workflow

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
1. –ê–¥–º–∏–Ω ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ‚Üí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
2. –í—ã–±–æ—Ä —Ç–∏–ø–∞ –∏ —Å—Ä–æ–∫–∞
3. –£–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã
4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ‚Üí `block_user()`
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –û–±–∂–∞–ª–æ–≤–∞–Ω–∏–µ
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ
2. –í–∏–¥–∏—Ç BlockedUserNotice
3. "–û–±–∂–∞–ª–æ–≤–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É"
4. –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞
5. –û–∂–∏–¥–∞–Ω–∏–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏—è
1. –ê–¥–º–∏–Ω ‚Üí –û–±–∂–∞–ª–æ–≤–∞–Ω–∏—è
2. –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
3. –û–¥–æ–±—Ä–∏—Ç—å/–û—Ç–∫–ª–æ–Ω–∏—Ç—å
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
1. Cron –≤—ã–∑—ã–≤–∞–µ—Ç `auto_unblock_users()` –∫–∞–∂–¥—ã–π —á–∞—Å
2. –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞
3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

## üìä –ú–µ—Ç—Ä–∏–∫–∏

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- –û–∂–∏–¥–∞—é—â–∏–µ –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏—è
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –º–µ—Å—è—Ü
- –¢–æ–ø –ø—Ä–∏—á–∏–Ω –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- –ü—Ä–æ—Ü–µ–Ω—Ç –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏–π

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è

- [x] –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `migration_user_blocking.sql`
- [x] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã RLS –ø–æ–ª–∏—Ç–∏–∫–∏
- [x] –°–æ–∑–¥–∞–Ω—ã PostgreSQL —Ñ—É–Ω–∫—Ü–∏–∏
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω cron –¥–ª—è auto_unblock_users()
- [x] –°–æ–∑–¥–∞–Ω—ã frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∞ Admin –ø–∞–Ω–µ–ª—å
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ CreateEvent –∏ EventDetails
- [x] –û–±–Ω–æ–≤–ª–µ–Ω—ã Rules.jsx
- [x] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] –ò—Å—Ç–æ—Ä–∏—è —Å–∞–Ω–∫—Ü–∏–π –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- [ ] –ê–≤—Ç–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ N –∂–∞–ª–æ–±–∞—Ö
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ CSV
- [ ] –®–∞–±–ª–æ–Ω—ã –ø—Ä–∏—á–∏–Ω –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- [ ] –ß–∞—Å—Ç–∏—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π
- [ ] Dashboard —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π

---

**–ú–∏–≥—Ä–∞—Ü–∏—è:** [database/migration_user_blocking.sql](database/migration_user_blocking.sql)
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** BlockedUserNotice, AppealBlockModal, BlockUserModal
**–°—Ç—Ä–∞–Ω–∏—Ü—ã:** Admin.jsx (–≤–∫–ª–∞–¥–∫–∏ Users, Appeals), CreateEvent.jsx, EventDetails.jsx, Rules.jsx
